#!/usr/bin/env bash

# Ask for the administrator password upfront
sudo -v

# Keep-alive: update existing `sudo` time stamp until finished
while true; do sudo -n true; sleep 60; kill -0 "$$" || exit; done 2>/dev/null &

###############################################################################
# iTerm                                                                       #
###############################################################################

# Install Fish Shell
sudo installer -pkg apps/iTerm/fish-3.0.2.pkg -target /

# Install OMF
curl -L https://get.oh-my.fish > install
fish install --noninteractive --yes
rm install

# Install bobthefish theme
omf install bobthefish

# Copy Fish config files
mkdir -p ~/.config/fish
rsync --exclude ".DS_Store" -avh --no-perms apps/iTerm/fish/. ~/.config/fish/

# Copy iTerm settings and theme + set theme
mkdir -p ~/.iterm/
rsync --exclude ".DS_Store" --exclude "fish" -avh --no-perms apps/iTerm/. ~/.iterm/
open ~/.iterm/1ockwood.itermcolors
